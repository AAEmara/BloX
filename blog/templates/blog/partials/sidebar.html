<!-- Sidebar (desktop view) -->
<div class="col-lg-4 d-none d-lg-block">
    <div class="p-3 bg-white border rounded shadow-sm sticky-top" style="top: 80px;">
        <h4 class="mb-3">Categories</h4>
        <ul class="list-group list-group-flush">
            {% for category in categories %}
                <li class="list-group-item py-2 px-0 border-0 d-flex justify-content-between align-items-center">
                    <a href="#" class="d-flex align-items-center gap-2 text-decoration-none text-dark fw-semibold hover-bg-light rounded px-2 py-2 flex-grow-1">
                        {# You can dynamically assign colors or use a default one #}
                        <span class="bg-primary-subtle rounded-circle d-inline-block" style="width: 8px; height: 8px;"></span>
                        {{ category.name }}
                    </a>
                    {% if request.user.is_authenticated %}
                        {# Check if the current user is subscribed to this category #}
                        {% if category in request.user.subscribed_categories.all %}
                            <a href="{% url 'blog:unsubscribe_category' category.id %}" class="btn btn-sm btn-danger ms-2">Unsubscribe</a>
                        {% else %}
                            <a href="{% url 'blog:subscribe_category' category.id %}" class="btn btn-sm btn-success ms-2">Subscribe</a>
                        {% endif %}
                    {% else %}
                        {# Changed from <span> to <a> button for logged-out users #}
                        <a href="{% url 'blog:subscribe_category' category.id %}" class="btn btn-sm btn-success ms-2">Subscribe</a>
                    {% endif %}
                </li>
            {% empty %}
                <li class="list-group-item py-2 px-0 border-0 text-muted">No categories available.</li>
            {% endfor %}
        </ul>
    </div>
</div>
<style>
.hover-bg-light:hover {
    background-color: #f8f9fa !important;
}
</style>

<!-- Sidebar Offcanvas (mobile view) -->
<div class="offcanvas offcanvas-end d-lg-none" tabindex="-1" id="mobileSidebar" aria-labelledby="mobileSidebarLabel">
    <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="mobileSidebarLabel">Categories</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
        <ul class="list-group list-group-flush">
            {% for category in categories %}
                <li class="list-group-item py-2 px-0 border-0 d-flex justify-content-between align-items-center">
                    <a href="#" class="d-flex align-items-center gap-2 text-decoration-none text-dark fw-semibold hover-bg-light rounded px-2 py-2 flex-grow-1">
                        {# You can dynamically assign colors or use a default one #}
                        <span class="bg-primary-subtle rounded-circle d-inline-block" style="width: 8px; height: 8px;"></span>
                        {{ category.name }}
                    </a>
                    {% if request.user.is_authenticated %}
                        {# Check if the current user is subscribed to this category #}
                        {% if category in request.user.subscribed_categories.all %}
                            <a href="{% url 'blog:unsubscribe_category' category.id %}" class="btn btn-sm btn-danger ms-2">Unsubscribe</a>
                        {% else %}
                            <a href="{% url 'blog:subscribe_category' category.id %}" class="btn btn-sm btn-success ms-2">Subscribe</a>
                        {% endif %}
                    {% else %}
                        {# Changed from <span> to <a> button for logged-out users #}
                        <a href="{% url 'blog:subscribe_category' category.id %}" class="btn btn-sm btn-success ms-2">Subscribe</a>
                    {% endif %}
                </li>
            {% empty %}
                <li class="list-group-item py-2 px-0 border-0 text-muted">No categories available.</li>
            {% endfor %}
        </ul>
    </div>
</div>

<!-- Floating Button for Mobile -->
<button class="btn btn-dark d-lg-none sidebar-toggle-btn" type="button" data-bs-toggle="offcanvas" data-bs-target="#mobileSidebar">
    â˜°
</button>
